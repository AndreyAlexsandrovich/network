/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){var e,n,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function u(t,o,c,i){var u=o&&o.prototype instanceof s?o:s,l=Object.create(u.prototype);return r(l,"_invoke",function(t,r,o){var c,i,u,s=0,l=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return c=t,i=0,u=e,d.n=r,a}};function f(t,r){for(i=t,u=r,n=0;!p&&s&&!o&&n<l.length;n++){var o,c=l[n],f=d.p,y=c[2];t>3?(o=y===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((o=t<2&&f<c[1])?(i=0,d.v=r,d.n=c[1]):f<y&&(o=t<3||c[0]>r||r>y)&&(c[4]=t,c[5]=r,d.n=y,i=0))}if(o||t>1)return a;throw p=!0,r}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,y),i=l,u=y;(n=i<2?e:u)||!p;){c||(i?i<3?(i>1&&(d.n=-1),f(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),n=c[o]){if(!(n=n.call(c,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=c.return)&&n.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=e}else if((n=(p=d.n<0)?u:t.call(r,d))!==a)break}catch(t){c=e,i=1,u=t}finally{s=1}}return{value:n,done:p}}}(t,c,i),!0),l}var a={};function s(){}function l(){}function p(){}n=Object.getPrototypeOf;var d=[][c]?n(n([][c]())):(r(n={},c,function(){return this}),n),f=p.prototype=s.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=p,r(f,"constructor",p),r(p,"constructor",l),l.displayName="GeneratorFunction",r(p,i,"GeneratorFunction"),r(f),r(f,i,"Generator"),r(f,c,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:u,m:y}})()}function r(e,t,n,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}r=function(e,t,n,o){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?c?c(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,o)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function s(e,t,r,n,o,c,i){try{var u=e[c](i),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(n,o)}var l=document.querySelector(".create-product"),p=document.querySelector("#button-close"),d=document.querySelector("#save-product");var f=document.querySelector("#form-search"),y=document.querySelector("#places__list");document.addEventListener("DOMContentLoaded",function(){var e,r,c,u;e=document.querySelectorAll("li"),r=document.querySelector(".menu-btn"),console.log(e),e.forEach(function(t){t.addEventListener("click",function(){e.forEach(function(e){e.classList.remove("active")}),t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")})}),r.addEventListener("click",function(e){document.querySelector(".sidebar").classList.toggle("close"),console.log(e.target)}),function(e){if(e)try{fetch("https://api.escuelajs.co/api/v1/products").then(function(e){if(!e.ok){var t=404===e.status?"Просим наши извенения":"Товары не найдены";throw new Error(t)}return e.json()}).then(function(t){t.forEach(function(t){var r=t.title,n=t.price,o=t.description,c=t.images,i=t.id,u=t.category.name.replace(/[^a-zA-Z0-9-_]/g,"").replace(/[^a-zA-Z0-9-_]/g,""),a=document.querySelector("#template-product").content.cloneNode(!0);a.querySelector("#title-product").textContent=r,a.querySelector("#price-product").textContent="".concat(n+"$"),a.querySelector("#description").textContent=o,a.querySelector("#image-product").src=c[0],a.querySelector(".product").id=i,a.querySelector(".product").classList.add("product-".concat(u)),e.appendChild(a)}),console.log(t)})}catch(t){e.innerHTML=t.message}}(y),document.querySelector(".popup-product")&&(c=document.querySelector(".popup-product"),u=c.querySelector(".popup__form"),function(e,t,r){t.addEventListener("click",function(){e.style.visibility="visible"}),r.addEventListener("click",function(t){t.preventDefault(),e.style.visibility="hidden"}),e.addEventListener("click",function(t){t.target===e&&(e.style.visibility="hidden")}),document.addEventListener("keydown",function(t){"Escape"===t.key&&(e.style.visibility="hidden")})}(c,l,p),c&&u&&d.addEventListener("click",function(){var e,r=(e=t().m(function e(r){var c,a,s,l,p,d,f,y,v,m,b;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r.preventDefault(),c=new FormData(u),a=Object.fromEntries(c),s=document.querySelector("#product-name").value+" ".concat(Date.now()),l=document.querySelector("#product-price").value,p=document.querySelector("#description-product").value,d=document.querySelector("#product-image").value,f=i(i({},a),{},{title:s,price:Number(l),description:p,categoryId:1,images:[d]}),e.p=1,e.n=2,fetch("https://api.escuelajs.co/api/v1/products/",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}});case 2:if(y=e.v,v=document.querySelector("#template-product").content.cloneNode(!0),y.ok){e.n=4;break}return e.n=3,y.json();case 3:throw m=e.v,new Error("Error ".concat(y.status,": ").concat(m.message||JSON.stringify(m)));case 4:return e.n=5,y.json();case 5:e.v,new(function(){return e=function e(t,r,o,c,i){n(this,e),this.name=t,this.price=r,this.image=o,this.description=c,this.container=i},(t=[{key:"newProduct",value:function(e,t,r,n,o){o.querySelector("#title-product").textContent=e,o.querySelector("#price-product").textContent="".concat(t,"$"),o.querySelector("#description").textContent=n,o.querySelector("#image-product").src=r}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())(s,l,p,d[0],v).newProduct(s,l,d,p,v),document.querySelector("#places__list").prepend(v),u.reset(),e.n=7;break;case 6:e.p=6,b=e.v,console.error("Ошибка создания товара:",b),alert("Ошибка: ".concat(b.message));case 7:return e.a(2)}},e,null,[[1,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var c=e.apply(t,r);function i(e){s(c,n,o,i,u,"next",e)}function u(e){s(c,n,o,i,u,"throw",e)}i(void 0)})});return function(e){return r.apply(this,arguments)}}())),document.querySelector("#form-search")&&function(e){try{fetch("https://api.escuelajs.co/api/v1/products").then(function(e){if(!e.ok){var t=404===e.status?"Такого товара нету":"Похоже такой товар еще никто не добавил :(";throw new Error(t)}return e.json()}).then(function(t){f.addEventListener("submit",function(r){var n=document.querySelector("#input-search").value.trim().toUpperCase();r.preventDefault();var o=t.filter(function(e){return e.title.toUpperCase().includes(n)&&""!==n});if(o.length>0){var c="";o.forEach(function(t){var r=t.title,n=t.price,o=t.description,i=t.images,u=t.id;c+='\n  <article>\n    <li class="product" id="'.concat(u,'">\n      <div class="product-container">\n        <div class="title-wrapper">\n          <h2 class="title-product" id="title-product">').concat(r,'</h2>\n        </div>\n        <div class="image-product-wrapper">\n          <img\n            src="').concat(i[0],'"\n            alt="Обложка товара"\n            class="image-product"\n            id="image-product"\n          />\n        </div>\n        <div class="description-product-wrapper">\n          <p class="description-product" id="description">').concat(o,'</p>\n        </div>\n        <div class="price-product">\n          <p class="price" id="price-product">').concat(n,'</p>\n        </div>\n        <div class="buy-product">\n          <button class="buy">Купить товар</button>\n        </div>\n      </div>\n    </li>\n  </article>\n              '),e.innerHTML=c,console.log(t)})}else e.innerHTML="товар ".concat(n," не найден")})})}catch(e){}}(y)})})();